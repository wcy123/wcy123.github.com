---
layout: post
title:  "使用  cmake 管理项目"
date:   2017/03/16 15:57:25
categories:
comments: true
---

# 介绍

cmake 是 c/c++ 的一个项目管理工具。远古人类使用 make
后来慢慢用 automake/autoconf/libtool 这些工具。 后来有人重新轮了几个，包括 scon, gyp , cmake。

gyp 是 google 的 JavaScript 引擎 V8 的管理工具。据说 google 自己也不用了，我没有确认过。

cmake 一开始是 kde 的项目的管理工具，后来越来越多的人使用了。

# hello world

```CMake
project(hello C CXX)
cmake_minimum_required(VERSION 3.8)
add_executable(hello hello.cpp)
```

### dependency
include(ExternalProject)
ExternalProject_Add(
  googleprotobuf
  GIT_REPOSITORY "http://gitlab.i.deephi.tech/wangchunye/protobuf.git"
#  GIT_TAG "v3.2.0"
  UPDATE_COMMAND ""
  INSTALL_COMMAND ""
)

ExternalProject_Get_Property(googleprotobuf SOURCE_DIR)
ExternalProject_Get_Property(googleprotobuf BINARY_DIR)
include_directories("${SOURCE_DIR}")
link_directories("${BINARY_DIR}")
set(Protobuf_PROTOC_EXECUTABLE ${BINARY_DIR}/bin/protoc)

add_executable(hello hello.cpp)
add_dependencies(hello googleprotobuf)
```



# 添加外部依赖



```
add_dependencies(caffe_deploy googleprotobuf)
```
