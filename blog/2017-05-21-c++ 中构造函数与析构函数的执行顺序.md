---
layout: post
title:  "c++ 中构造函数与析构函数的执行顺序"
date:   2017/05/21 21:04:18
categories:
draft: true
comments: true
---

```{.cpp include=blog/2017-05-21/ctor_1.cpp}
```

执行结果

```{.plain include=blog/2017-05-21/ctor_1.out}
```

`bar():f_() {...}` 构造函数中，冒号后面跟的是一个成员变量初始化列表，member initialization list 。指明每个成员变量的构造参数。

当构造完每一个成员变量之后，执行构造函数的函数体。

有些很早很早的书上介绍构造函数的时候，把成员变量的初始化，放在了函数体内部，调用赋值操作符重载。

```cpp
bar() {
   f_ = 100;
}
```

这样的缺点是多余调用了默认函数一次。更重要的是，很多类是不可赋值，不可拷贝的，只能在构造函数实现。根据 RAII
的原则，很多时候，一旦一个类的构造函数执行完毕，意味着资源已经申请成功了。一个变量，或者成员变量，最好初始化一次，且只初始化一次，然后对应的只“关闭”一次。
